{
  "name": "MkDocs Publisher",
  "author": "DevRel Team",
  "description": "A simple action to build an MkDocs site and push it to the gh-pages branch.",
  "inputs": {
    "python-version": {
      "description": "The version of Python to set up for building.",
      "default": "3.11"
    },
    "requirements-file": {
      "description": "Path to the Python requirements file",
      "required": true
    },
    "gh-token": {
      "description": "GitHub token for deployment. Prefer using GITHUB_TOKEN environment variable directly if permissions allow.",
      "required": true
    }
  },
  "outputs": {
    "page-url": {
      "description": "The URL of the deployed GitHub Pages site.",
      "value": "${{ steps.deploy.outputs.page_url }}"
    }
  },
  "runs": {
    "using": "composite",
    "steps": [
      {
        "uses": "actions/checkout@v4"
      },
      {
        "uses": "actions/setup-python@v5",
        "with": {
          "python-version": "${{ inputs.python-version }}"
        },
        "id": "setup_python"
      },
      {
        "run": "pip install -r ${{ inputs.requirements-file }}",
        "shell": "bash",
        "name": "Install Python Packages"
      },
      {
        "run": "mkdocs build",
        "shell": "bash"
      },
      {
        "uses": "peaceiris/actions-gh-pages@v3",
        "with": {
          "github_token": "${{ inputs.gh-token }}",
          "publish_dir": "./site"
        },
        "id": "deploy",
        "if": "github.ref == 'refs/heads/main'"
      }
    ]
  },
  "branding": {
    "color": "blue",
    "icon": "book-open"
  }
}